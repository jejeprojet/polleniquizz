<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Jeu : Trouve l'intrus - Les H√©ros Invisibles</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
      background: url('/mnt/data/A_photograph_captures_a_sunlit_meadow_in_full_bloo.png') center/cover no-repeat,
                  linear-gradient(to top, #80c241 0%, #dff5e5 50%, #a3e3f5 100%);
      color: #2c3e50;
    }
    h1 { color: #27ae60; }
    #level-buttons { margin: 20px 0; }
    #level-buttons button {
      margin: 5px;
      padding: 12px 20px;
      background-color: #27ae60;
      border: none;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: background-color 0.2s;
    }
    #level-buttons button:hover { background-color: #1e884a; }
    .score { font-size: 1.4em; margin-top: 12px; }
    .game-area { display: flex; flex-wrap: wrap; justify-content: center; gap: 16px; margin-top: 25px; }
    .item {
      background-color: rgba(255,255,255,0.8);
      border: 2px solid #27ae60;
      border-radius: 12px;
      width: 140px;
      height: 140px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.2s;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      padding: 5px;
      box-sizing: border-box;
    }
    .item:hover { transform: scale(1.05); background-color: rgba(255,255,255,1); }
    .item img { max-width: 100%; max-height: 100%; }
    .message { margin-top: 22px; font-weight: bold; font-size: 1.2em; }
    .info {
      margin-top: 14px;
      font-size: 0.95em;
      text-align: left;
      padding: 18px;
      background-color: rgba(255,255,255,0.9);
      border: 1px solid #27ae60;
      border-radius: 8px;
      max-width: 680px;
      margin: 14px auto;
      line-height: 1.4;
      white-space: pre-line;
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <h1>‚≠ê Trouve l'intrus : Les H√©ros Invisibles ‚≠ê</h1>
  <p>Le but ? D√©masquer l'esp√®ce menac√©e parmi les cr√©atures !</p>
  <div id="level-buttons">
    <button onclick="startGame('facile')">Facile</button>
    <button onclick="startGame('moyen')">Moyen</button>
    <button onclick="startGame('difficile')">Difficile</button>
  </div>
  <div class="score" id="scoreDisplay" style="display:none;">Score : 0</div>
  <div class="game-area" id="gameArea"></div>
  <div class="message" id="message"></div>
  <div class="info" id="info"></div>
  <script>
    const definitions = {
      "M√©lib√©e": `**M√©lib√©e**\n- Papillon bleu des montagnes avec de petites taches noires.\n- Elle aide les fleurs √† grandir en transportant le pollen.\n- Son habitat dispara√Æt quand les prairies sont coup√©es.\n**Pour aider** : Plante des fleurs sauvages et demande √† un adulte d'√©viter de couper l'herbe trop court.`,
      "Vanesse des pari√©taires": `**Vanesse des pari√©taires**\n- Papillon aux ailes d√©coup√©es qui vit pr√®s des vieux murs.\n- Sa chenille mange une plante appel√©e pari√©taire.\n- Elle est menac√©e quand on enl√®ve cette plante.\n**Pour aider** : Laisse pousser la pari√©taire dans un coin calme et √©vite les produits chimiques l√†-bas.`,
      "Agrion bleuissant": `**Agrion bleuissant**\n- Petite libellule bleue qui vole pr√®s de l'eau claire.\n- Elle mange les moustiques et aide √† garder l'eau propre.\n- Elle dispara√Æt si l'eau est pollu√©e.\n**Pour aider** : Cr√©e un petit bassin sans pesticide et plante des plantes pr√®s du bord pour filtrer l'eau.`,
      "Cordulie splendide": `**Cordulie splendide**\n- Libellule verte brillante que l'on voit voler pr√®s des √©tangs.\n- Elle attrape les insectes nuisibles comme les moustiques.\n- Elle est sensible √† la lumi√®re artificielle la nuit.\n**Pour aider** : Baisse les lumi√®res la nuit et laisse les zones humides tranquilles.`,
      "Serratella mesoleuca": `**Serratella mesoleuca**\n- √âph√©m√®re qui na√Æt dans l'eau et vit quelques heures en adulte.\n- C'est un repas important pour les poissons et les oiseaux.\n- Elle meurt si les berges sont b√©tonn√©es.\n**Pour aider** : Garde les berges naturelles avec des plantes et √©vite les travaux lourds au bord de l'eau.`,
      "Halictus carinthiacus": `**Halictus carinthiacus**\n- Petite abeille solitaire qui niche dans le sol.\n- Elle pollinise des fleurs que l'abeille domestique ne visite pas.\n- Elle est menac√©e par le pi√©tinement des prairies.\n**Pour aider** : Cr√©e un petit espace de sol non pi√©tin√© et plante des fleurs sauvages.`,
      "Bourdon velout√©": `**Bourdon velout√©**\n- Gros insecte poilu qui butine de nombreuses fleurs.\n- Il aide √† produire des fruits et l√©gumes.\n- Les pesticides le rendent malade.\n**Pour aider** : Laisse un coin de ton jardin en fleurs et n'utilise pas de produits chimiques.`,
      "Criquet de la Crau": `**Criquet de la Crau**\n- Cr√©ature unique d'une plaine s√®che en France.\n- Il vit dans un habitat tr√®s rare qu'il partage avec peu d'autres animaux.\n- Il dispara√Æt si on construit ou cultive partout.\n**Pour aider** : Soutiens la protection de ces pelouses s√®ches et ne cueille pas les plantes l√†-bas.`,
      "Phasme du palmiste rouge": `**Phasme du palmiste rouge**\n- Insecte long vert qui ressemble √† une brindille.\n- Il vit dans les for√™ts de La R√©union sur un palmier sp√©cial.\n- Il est en danger si la for√™t est ab√Æm√©e.\n**Pour aider** : Informe-toi sur la for√™t tropicale et soutiens les projets de reforestation.`,
      "Dendrobias maxillosus": `**Dendrobias maxillosus**\n- Scarab√©e brillant qui vit dans le bois mort.\n- Il aide √† recycler les troncs en nutriments pour la terre.\n- Il dispara√Æt si on enl√®ve tout le bois mort.\n**Pour aider** : Laisse quelques branches s√®ches dans la for√™t et prot√®ge les vieux arbres.`,
      // D√©coys simples
      "Mouche domestique": `**Mouche domestique**\n- Insecte commun qui aime les maisons.\n- Elle aide √† d√©composer les d√©chets.`,
      "Fourmi noire": `**Fourmi noire**\n- Vit en grande colonie sous terre.\n- Elle aide √† a√©rer le sol en creusant des tunnels.`,
      "Papillon commun": `**Papillon commun**\n- Ailes blanches fr√©quemment vues dans les jardins.\n- Il butine parfois les fleurs.`,
      "Abeille domestique": `**Abeille domestique**\n- Vit dans des ruches tenues par les apiculteurs.\n- Elle produit du miel et pollinise les cultures.`,
      "Sauterelle verte": `**Sauterelle verte**\n- Insecte qui saute haut dans les prairies.\n- Elle mange des plantes, sans danger pour elles.`,
      "Scarab√©e commun": `**Scarab√©e commun**\n- Vit dans les feuilles mortes et le compost.\n- Il aide √† recycler la mati√®re organique.`,
      "Coccinelle √† sept points": `**Coccinelle**\n- Petite b√™te rouge avec des points noirs.\n- Elle mange des pucerons qui mangent les plantes.`,
      "Termite des for√™ts": `**Termite des for√™ts**\n- Petit insecte social qui d√©compose le bois mort.\n- Il n'ab√Æme pas les maisons quand il est dans la for√™t.`,
      "Grillon champ√™tre": `**Grillon champ√™tre**\n- Orthopt√®re qui chante dans les champs.\n- Il vit pr√®s des herbes hautes.`,
      "Larve de coccinelle": `**Larve de coccinelle**\n- Jeune coccinelle qui mange beaucoup de pucerons.\n- Elle devient coccinelle adulte apr√®s une m√©tamorphose.`,
      "Cicadelle": `**Cicadelle**\n- Petit insecte qui saute et boit de la s√®ve.\n- On le trouve souvent sur les feuilles.`,
      "Lucane cerf-volant": `**Lucane cerf-volant**\n- Grand col√©opt√®re aux m√¢choires imposantes.\n- Il vit dans les vieux arbres et le bois mort.`,
      "Punaise verte": `**Punaise verte**\n- Insecte qui suce la s√®ve des plantes.\n- Elle est souvent vue sur les feuilles.`,
      "Mite des v√™tements": `**Mite des v√™tements**\n- Petite larve qui peut ab√Æmer les tissus.\n- Elle n'a pas de r√¥le de pollinisateur.`,
      "Perce-oreille": `**Perce-oreille**\n- Insecte aux pinces √† l'arri√®re du corps.\n- Il mange des petits insectes et des d√©chets.`,
      "Loup": `**Loup**\n- Grand mammif√®re carnivore qui vit en meute.\n- Il n'est pas un insecte mais un super chasseur.`,
      "Renard": `**Renard**\n- Mammif√®re rus√© qui vit pr√®s des for√™ts et des champs.\n- Il se nourrit de petits animaux et de fruits.`,
      "Chat": `**Chat**\n- F√©lin domestique et chasseur de petits rongeurs.\n- Il n'aide pas aux fleurs mais prot√®ge la maison des insectes.`,
      "Chien": `**Chien**\n- Meilleur ami de l'homme, omnivore et protecteur.\n- Il ne vole pas mais garde la maison en s√©curit√©.`,
      "Pigeon": `**Pigeon**\n- Oiseau urbain tr√®s adaptable.\n- Il picore les graines et aide √† disperser certaines plantes.`
    };
    const intrusList = [
      "M√©lib√©e","Vanesse des pari√©taires","Agrion bleuissant","Cordulie splendide","Serratella mesoleuca",
      "Halictus carinthiacus","Bourdon velout√©","Criquet de la Crau","Phasme du palmiste rouge","Dendrobias maxillosus"
    ];
    const decoys = [
      "Chauve-souris frugivore","Colibri",
      "Mouche domestique","Fourmi noire","Papillon commun","Abeille domestique","Sauterelle verte",
      "Scarab√©e commun","Coccinelle √† sept points","Termite des for√™ts","Grillon champ√™tre",
      "Larve de coccinelle","Cicadelle","Lucane cerf-volant","Punaise verte","Mite des v√™tements","Perce-oreille",
      "Loup","Renard","Chat","Chien","Pigeon"
    ];
    const levels = {
      facile: intrusList.slice(0,5),
      moyen: intrusList.slice(5,10),
      difficile: intrusList.slice(2,7)
    }; 
    let score = 0, correctStreak = 0, wrongStreak = 0, currentLevel = [], currentStep = 0;
    const scoreDisplay = document.getElementById('scoreDisplay');
    const infoDiv = document.getElementById('info');
    const levelButtons = document.getElementById('level-buttons');
    function startGame(level) {
      currentLevel = levels[level]; currentStep = 0; score = 0; correctStreak = 0; wrongStreak = 0;
      levelButtons.style.display = 'none'; scoreDisplay.style.display = 'block'; updateScore(); infoDiv.textContent = '';
      showStep();
    }
    function showStep() {
      infoDiv.textContent = ''; document.getElementById('message').textContent = '';
      const intrus = currentLevel[currentStep];
      const choices = shuffle(decoys).slice(0,4);
      const items = shuffle([...choices, intrus]);
      const gameArea = document.getElementById('gameArea'); gameArea.innerHTML = '';
      items.forEach(item => {
        const div = document.createElement('div'); div.className = 'item';
        const icon = document.createElement('img');
        icon.src = `images/icons/${item.replace(/\s+/g,'_')}.png`;
        icon.alt = item; div.appendChild(icon);
        div.onclick = () => handleClick(item, intrus);
        gameArea.appendChild(div);
      });
    }
    function handleClick(item, intrus) {
      const msg = document.getElementById('message');
      infoDiv.innerHTML = `<img src="images/details/${item.replace(/\s+/g,'_')}.png" alt="${item}" style="width:100%;border-radius:8px;margin-bottom:10px;">` + definitions[item];
      if (item === intrus) {
        wrongStreak = 0; correctStreak++;
        const bonus = 4 + correctStreak;
        score += bonus;
        msg.textContent = `‚úÖ Bravo ! Intrus prot√©g√© : ${item} (+${bonus} pts)`;
        msg.style.color = '#27ae60'; currentStep++; updateScore();
        setTimeout(() => currentStep < currentLevel.length ? showStep() : finishGame(), 1000);
      } else {
        correctStreak = 0; wrongStreak++;
        score = Math.max(0, score - wrongStreak);
        msg.textContent = `‚ùå ${item} n'est pas une esp√®ce √† prot√©ger (‚àí${wrongStreak} pts)`;
        msg.style.color = '#c0392b'; updateScore();
      }
    }
    function finishGame() {
      document.getElementById('gameArea').innerHTML = '';
      document.getElementById('message').textContent = `üéâ Score final : ${score} points.`;
      infoDiv.textContent = ''; levelButtons.style.display = 'block';
    }
    function updateScore() { scoreDisplay.textContent = `Score : ${score}`; }
    function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }
  </script>
</body>
</html>


